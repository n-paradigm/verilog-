// buzzer.v
module buzzer (
    input wire clk,        // 系统时钟，比如 50MHz
    input wire rst,        // 复位信号
    input wire buzz,
    output reg buzzer_out	 // 控制信号，来自 main_ctrl
);
    
    reg [23:0] cnt;       // 计数器，用于分频生成1kHz
  
    
    // 1kHz 方波生成（假设clk = 50MHz）
    always @(posedge clk or posedge rst) begin
        if (rst) begin
            cnt <= 0;
            buzzer_out <= 0;
        end else begin
            if (buzz == 1'b1) begin
                if (cnt < 24_999) begin  // 50MHz / 25000 ≈ 2kHz → 占空比50%
                    cnt <= cnt + 1;
                end else begin
                    cnt <= 0;
                    buzzer_out <= ~buzzer_out;  // 翻转输出
                end
            end else begin
                buzzer_out <= 0;  // 关闭蜂鸣器
                cnt <= 0;
            end
        end
    end

   

endmodule